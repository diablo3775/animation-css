<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    .option {
        display: inline-block;
        padding: 10px 0 10px 0px;
        cursor: pointer;
        color: #000;
        text-decoration: none;
        position: relative;
        margin: 0 4px;
        width: 215px;
        text-align: center;
        font-size: 17px;
        font-weight: 500;
        overflow: hidden;
    }

    .option:before {
        content: "";
        position: absolute;
        left: 0;
        bottom: -2px;
        width: 100%;
        height: 5px;
        background-color: #CCCCCC;
    }

    .option.active::after {
        content: "";
        position: absolute;
        left: -100%;
        bottom: -2px;
        width: 100%;
        height: 5px;
        background-color: #4e55fd;
        animation: fillProgress 2s linear forwards;
    }

    .option.active-user-click::after {
        content: "";
        position: absolute;
        left: -100%;
        bottom: -2px;
        width: 100%;
        height: 5px;
        background-color: #4e55fd;
        animation: fillProgress linear forwards;
    }

    @keyframes fillProgress {
        to {
            left: 0;
        }
    }
    
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<body>
    
    <section class="section-one engineering carousel-container">
        <div class="container c-width">
            <div class="carousel carousel slide" data-bs-ride="false" data-bs-interval="false">
                <div class="carousel-inner">

                    <!-- <div>adsf</div> -->
                    <div class="user-roles">
                        <div class="carousel-button option" data-carousel-target="0">
                            Optimize
                        </div>
                        <div class="carousel-button option " data-carousel-target="1">
                            Operate
                        </div>
                        <div class="carousel-button option " data-carousel-target="2">
                            Operate 3
                        </div>
                    </div>

                    <div class="carousel-item active">
                        <div class="row">
                            <div class="col-md-4 order-2 order-md-1">
                                <div class="cth-content">
                                    Monitor and optimize your cloud resources with one-click integration
                                </div>
                            </div>
                            <div class="col-md-8 order-2 order-md-1">
                                <video id="visualize-video" class="slide-video" defaultplaybackrate="1" autoplay=""
                                playsinline="" loop="" type="video/mp4" src="assets/videos/home_product_visualize.mp4"
                                muted=""
                                style="width:100%"
                                >
                            </video>
                            </div>
                        </div>
                    </div>

                    <div class="carousel-item">
                        <div class="row">
                            <div class="col-md-4 order-2 order-md-1">
                                <div class="cth-content">
                                    2fdf
                                </div>
                            </div>
                            <div class="col-md-8 order-2 order-md-1">
                                <video id="visualize-video" class="slide-video" defaultplaybackrate="1" autoplay=""
                                playsinline="" loop="" type="video/mp4" src="assets/videos/home_product_visualize.mp4"
                                muted=""
                                style="width:100%"
                                >
                            </video>
                            </div>
                        </div>
                    </div>

                    <div class="carousel-item">
                        <div class="row">
                            <div class="col-md-4 order-2 order-md-1">
                                <div class="cth-content">
                                    Establish continuous improvement process
                                </div>
                            </div>
                            <div class="col-md-8 order-2 order-md-1">
                                <video id="visualize-video" class="slide-video" defaultplaybackrate="1" autoplay=""
                                playsinline="" loop="" type="video/mp4" src="assets/videos/home_product_visualize.mp4"
                                muted=""
                                style="width:100%"
                                >
                            </video>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section-two container-three finance carousel-container" style="margin-top: 300px;">
        <div class="container c-width">
           <div class="carousel carousel slide" data-bs-ride="false" data-bs-interval="false">
              <div class="carousel-inner">


                 <div class="user-roles">
                    <div class="carousel-button option" data-carousel-target="0" data-option="search">
                       Analyze
                    </div>
                    <div class="carousel-button option" data-carousel-target="1" data-option="visualize">
                       Forecast
                    </div>
                 </div>

                 <div class="carousel-item active">
                    <div class="row">
                       <div class="col-sm-8">
                          <div>
                             <video style="width: 100%" id="search-video" class="slide-video" defaultplaybackrate="1" autoplay=""
                                playsinline="" loop="" type="video/mp4" src="assets/videos/home_product_search.mp4"
                                muted="" ></video>
                          </div>
                       </div>

                       <div class="col-sm-4">
                          <div>
                             <div class="cth-content">Analyze cloud spend at the speed of your thought</div>
                             <p class="cth-p">
                                through a conversational style NLP AI-powered interface with rich, accurate
                                and actionable insights.
                             </p>
                          </div>
                       </div>
                    </div>
                 </div>

                 <div class="carousel-item">
                    <div class="row">
                       <div class="col-sm-8">
                          <div>
                             <video style="width: 100%" id="visualize-video" class="slide-video" defaultplaybackrate="1" autoplay=""
                                playsinline="" loop="" type="video/mp4" src="assets/videos/home_product_visualize.mp4"
                                muted=""></video>
                          </div>
                       </div>
                       <div class="col-sm-4">
                          <div>
                             <div class="cth-content">Track Actuals and Forecast to Budget</div>
                             <p class="cth-p">
                                drill down into your forecast data across multiple dimensions including
                                across cloud providers, product and business units.
                             </p>
                          </div>
                       </div>
                    </div>
                 </div>

     </section>

</body>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous">
    </script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
<script>
$(document).ready(function () {
    $('.carousel-container').each(function (index) {
        var carouselId = 'carouselExample' + (index + 1);
        var buttonContainer = $(this);
        var carousel = $(this).find('.carousel');
        var options = buttonContainer.find('.carousel-button');
        var currentIndex = 0;
        var firstClick = true;
        var hasLoggedSectionOne = false;
        var hasLoggedSectionTwo = false;

        var isInViewport = function(elem) {
            var bounding = elem.getBoundingClientRect();
            return (
                bounding.top >= 0 &&
                bounding.left >= 0 &&
                bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                bounding.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        };

    // If height of the container is more then try with this above viewport is for 100vh
    //         var isInViewport = function(elem) {
    //     var bounding = elem.getBoundingClientRect();
    //     var viewportHeight = 1340;
    //     return (
    //         bounding.top >= 0 &&
    //         bounding.left >= 0 &&
    //         bounding.bottom <= viewportHeight &&
    //         bounding.right <= (window.innerWidth || document.documentElement.clientWidth)
    //     );
    // };
    
        

        var getFirstViewportClass = function() {
            let sname;
            if (!hasLoggedSectionOne && isInViewport($('.section-one')[0])) {
                sname = "section-one";
                hasLoggedSectionOne = true;
            } else if (!hasLoggedSectionTwo && isInViewport($('.section-two')[0])) {
                sname = "section-two";
                hasLoggedSectionTwo = true;
            }

            if (buttonContainer.hasClass(sname)) {
                buttonContainer.find('.carousel-button[data-carousel-target="0"]').addClass('active');

                function nextItem() {
                    if (currentIndex < options.length - 1) {
                        currentIndex++;
                        options.eq(currentIndex).click();
                    } else {
                        clearInterval(interval);
                    }
                }

                var interval = setInterval(nextItem, 2000);

                options.click(function () {
                    var targetIndex = $(this).data('carousel-target');
                    carousel.carousel(targetIndex);
                    if (firstClick) {
                        buttonContainer.find('.carousel-button.active').removeClass('active');
                        $(this).addClass('active');
                        if (currentIndex === options.length - 1) {
                            firstClick = false;
                            clearInterval(interval);
                        }
                    } else {
                        buttonContainer.find('.carousel-button.active').removeClass('active');
                        buttonContainer.find('.carousel-button.active-user-click').removeClass('active-user-click');
                        $(this).addClass('active-user-click');
                    }
                });
            }
        };
        getFirstViewportClass();

        $(window).scroll(function() {
            getFirstViewportClass();
        });
    });
});


</script>

</html>
